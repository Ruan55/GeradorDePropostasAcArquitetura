<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Propostas e Orçamentos</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        
        <h1>Gerador De Propostas</h1>

    </header>

    <main class="container">

        <section class="card">

            <h2>Dados Do Cliente/Proposta</h2>

            <div class="input-group">

                <label for="cliente">Nome do Cliente:</label>
                <input type="text" id="cliente" required>

            </div>

            <div class="input-group">

                <label for="proposta-titulo">Título da Proposta:</label>
                <input type="text" id="proposta-titulo" required>

            </div>

            <div class="input-group">

                <label for="data">Data:</label>
                <input type="date" id="data" required>

            </div>

        </section>

        <section class="card">

            <h2>Itens do Orçamento</h2>

            <table id="tabela-itens">

                <thead>

                    <tr>
                        <th>Serviço/Item</th>
                        <th>Descrição</th>
                        <th>Valor (R$)</th>
                        <th>Ação</th>
                    </tr>

                </thead>

                <tbody id="lista-itens"></tbody>

            </table>

            <div class="input-group importacao-csv" style="margin-top: 20px;">

                <label for="csv-file">Carregar Tabela de Serviços (CSV):</label>
                <input type="file" id="csv-file" accept=".csv">
                <button id="btn-importar-csv">Carregar Serviços</button>

            </div>

            <hr>

            <div class="adicionar-item">

                <input type="text" id="novo-servico" list="sugestoes-servico" placeholder="Selecione ou digite o serviço">

                <input type="text" id="nova-descricao" placeholder="Descrição (Preenchida Automaticamente)">

                <input type="text" id="novo-valor" placeholder="Valor (R$)" min="0" step="0.01">
                <button id="btn-adicionar">Adicionar Item</button>

            </div>

        </section>

        <section class="card">

            <h2>Resumo e Total</h2>
            <p>Subtotal: <span id="subtotal">R$ 0.00</span></p>
            <p>Imposto (10%): <span id="imposto">R$ 0.00</span></p>
            <h3>Total Geral: <span id="total-geral">R$ 0.00</span></h3>

            <div class="acoes">

                <div class="input-group">

                    <label for="select-exportacao">Exportar Documento:</label>
                    <select id="select-exportacao">

                        <option value="">Selecione o Formato de Saída</option>
                        <option value="pdf">Gerar PDF</option>
                        <option value="doc">Gerar DOC</option>
                        <option value="csv">Gerar CSV</option>

                    </select>

                </div>

            </div>

        </section>

        <datalist id="sugestoes-servico"></datalist>

        <div id="modelo-proposta" style="display: none; padding: 20px; font-family: Arial, sans-serif;">

            <h1 id="pdf-titulo"></h1>
            <p><strong>Cliente: </strong> <span id="pdf-cliente"></span></p>
            <p><strong>Data: </strong> <span id="pdf-data"></span></p>

            <hr>

            <h2>Orçamento Detalhado</h2>
            <table style="width: 100%; border-collapse: collapse;">

                <thead>

                    <tr>
                        <th style="border: 1px solid #ccc; padding: 8px; text-align: left;">Serviço</th>
                        <th style="border: 1px solid #ccc; padding: 8px; text-align: left;">Descrição</th>
                        <th style="border: 1px solid #ccc; padding: 8px; text-align: right;">Valor (R$)</th>
                    </tr>

                </thead>

                <tbody id="pdf-lista-itens"></tbody>

            </table>

            <hr>

            <p style="text-align: right;">Subtotal: <span id="pdf-subtotal"></span></p>
            <p style="text-align: right;">Imposto (10%) <span id="pdf-imposto"></span></p>
            <h3 style="text-align: right;">Total Geral: <span id="pdf-total-geral"></span></h3>

            <p style="margin-top: 30px;">Aguardamos a sua aprovação!</p>

        </div>

    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/docx/8.5.0/index.min.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    
    <script src="script.js"></script>

    <script>

        // Define a data atual no campo de data ao carregar a página
        document.getElementById('data').valueAsDate = new Date();

    </script>

</body>
</html>